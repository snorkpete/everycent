!function(){angular.module("everycent.common",[])}(),function(){function RouteConfiguration($stateProvider){$stateProvider.state("institutions",{url:"/institutions",templateUrl:"app/institutions/list.html",controller:"InstitutionsCtrl as vm",resolve:{auth:["$auth",function($auth){return $auth.validateUser()}]}})}angular.module("everycent.institutions",["everycent.common"]).config(RouteConfiguration),RouteConfiguration.$inject=["$stateProvider"]}(),function(){angular.module("everycent.menu",["everycent.common"])}(),function(){function RouteConfiguration($stateProvider){$stateProvider.state("sign_in",{url:"/sign_in",templateUrl:"app/security/sign-in.html",controller:"SignInCtrl as vm"})}angular.module("everycent.security",["everycent.common"]).config(RouteConfiguration),RouteConfiguration.$inject=["$stateProvider"]}(),function(){"use strict";function AppConfig($authProvider){$authProvider.configure({apiUrl:""})}function MainCtrl(MessageService){var main=this;main.ui=MessageService.data,main.currentPage="institutions",main.user={name:"Kion Stephen"}}angular.module("everycent",["ui.bootstrap","ui.router","ngCookies","ng-token-auth","restangular","everycent.common","everycent.menu","everycent.security","everycent.institutions"]),angular.module("everycent").config(AppConfig).controller("MainCtrl",MainCtrl),AppConfig.$inject=["$authProvider"],MainCtrl.$inject=["MessageService"]}(),function(){"use strict";function RouteConfiguration($stateProvider,$urlRouterProvider){$stateProvider.state("home",{url:"/",templateUrl:"app/home/home.html",controller:[function(){}]}).state("all",{"abstract":!0,resolve:{auth:["$auth",function($auth){return $auth.validateUser()}]}}).state("all.institutions",{url:"/institutions",templateUrl:"app/institutions/list.html",controller:"InstitutionsCtrl as vm"}),$urlRouterProvider.otherwise("/")}angular.module("everycent").config(RouteConfiguration),RouteConfiguration.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function ecFormField(){function controller(){var vm=this;vm.labelWidth=2,vm.fieldWidth=10}var directive={restrict:"E",templateUrl:"app/common/ec-form-field-directive.html",scope:{label:"@",type:"@",labelWidth:"@",fieldWidth:"@",placeholder:"@",isRequired:"=ngRequired",model:"=ngModel",error:"=",name:"=fieldName"},controller:controller,controllerAs:"vm",bindToController:!0};return directive}angular.module("everycent.common").directive("ecFormField",ecFormField)}(),function(){"use strict";function ecIcon(){function controller(){}var directive={restrict:"E",templateUrl:"app/common/ec-icon-directive.html",scope:{type:"@"},controller:controller,controllerAs:"vm",bindToController:!0};return directive}angular.module("everycent.common").directive("ecIcon",ecIcon)}(),function(){function ecMessage(){var directive={restrict:"E",templateUrl:"app/common/ec-message-directive.html",scope:{},controller:controller,controllerAs:"vm",bindToController:!0};return directive}function controller(MessageService){var vm=this;vm.ui=MessageService.getMessageData()}angular.module("everycent.common").directive("ecMessage",ecMessage),controller.$inject=["MessageService"]}(),function(){"use strict";function ecPanel(){function controller(){var vm=this;vm.type="default"}var directive={restrict:"E",templateUrl:"app/common/ec-panel-directive.html",transclude:!0,scope:{type:"@",title:"@"},controller:controller,controllerAs:"vm",bindToController:!0};return directive}angular.module("everycent.common").directive("ecPanel",ecPanel)}(),function(){"use strict";function ErrorService(){function setErrors(form,errorData){Object.keys(errorData).forEach(function(field){form[field].$error.server=errorData[field][0]})}var service={setErrors:setErrors};return service}angular.module("everycent.common").factory("ErrorService",ErrorService),ErrorService.$inject=[]}(),function(){function MessageService(){function getMessageData(){return data}function setMessage(message){clearMessage(),data.message=message}function setErrorMessage(message){clearMessage(),data.errorMessage=message}function setWarningMessage(message){clearMessage(),data.warningMessage=message}function clearMessage(){data.message="",data.errorMessage="",data.warningMessage=""}var data={},service={getMessageData:getMessageData,setMessage:setMessage,setErrorMessage:setErrorMessage,setWarningMessage:setWarningMessage,clearMessage:clearMessage};return service}angular.module("everycent.common").factory("MessageService",MessageService),MessageService.$inject=[]}(),function(){"use strict";function ModalService($modal,$document){function show(options){function modalController(){var vm=this;vm.options=options,modalFix(),vm.options.confirm=function(){modalInstance.close("ok")},vm.options.cancel=function(){modalInstance.dismiss("cancel")}}var modalInstance=$modal.open({templateUrl:"app/common/modal.html",backdrop:"static",controller:modalController,controllerAs:"vm"});return modalInstance.result}function modalFix(){setTimeout(function(){angular.element($document[0].querySelectorAll("div.modal-backdrop")).css("height","1000px")},100)}var service={show:show};return service}angular.module("everycent.common").factory("ModalService",ModalService),ModalService.$inject=["$modal","$document"]}(),function(){"use strict";function InstitutionsCtrl(MessageService,InstitutionsService,ModalService,ErrorService){function activate(){refreshInstitutionList()}function refreshInstitutionList(){InstitutionsService.getInstitutions().then(function(institutions){vm.institutions=institutions})}function addInstitution(institution,form){InstitutionsService.addInstitution(institution).then(function(){refreshInstitutionList(),MessageService.setMessage('Institution "'+institution.name+'" added successfully.'),institution.name=""},function(errorResponse){return ErrorService.setErrors(form,errorResponse.data),MessageService.setErrorMessage("Institution not saved."),!1})}function deleteInstitution(institution){var modalOptions={headerText:"Delete this institution?",bodyText:"Are you sure you want to delete the institution: "+institution.name+"?",confirmButtonText:"Delete",cancelButtonText:"Cancel"};ModalService.show(modalOptions).then(function(){institution.remove().then(function(){refreshInstitutionList(),MessageService.setMessage("Institution deleted.")})["catch"](function(){MessageService.setErrorMessage("Error deleting.")})},function(){MessageService.setErrorMessage("Delete cancelled.")})}var vm=this;vm.institution={},vm.institutions=[],vm.addInstitution=addInstitution,vm.deleteInstitution=deleteInstitution,activate()}angular.module("everycent.institutions").controller("InstitutionsCtrl",InstitutionsCtrl),InstitutionsCtrl.$inject=["MessageService","InstitutionsService","ModalService","ErrorService"]}(),function(){"use strict";function InstitutionsService($http,Restangular){function getInstitutions(){return baseAll.getList()}function addInstitution(institution){return baseAll.post(institution)}var service={getInstitutions:getInstitutions,addInstitution:addInstitution},baseAll=Restangular.all("institutions");return service}angular.module("everycent.institutions").factory("InstitutionsService",InstitutionsService),InstitutionsService.$inject=["$http","Restangular"]}(),function(){function ecNavbar(){var directive={restrict:"E",templateUrl:"app/menu/ec-navbar-directive.html",scope:{userName:"=",currentPage:"="},controller:controller,controllerAs:"vm",bindToController:!0};return directive}function controller(MessageService,$state){function goToPage(page){$state.go(page),vm.currentPage=page,MessageService.clearMessage()}function logout(){MessageService.setErrorMessage("Logout not yet implemented.")}var vm=this;vm.goToPage=goToPage,vm.logout=logout}angular.module("everycent.menu").directive("ecNavbar",ecNavbar),controller.$inject=["MessageService","$state"]}(),function(){"use strict";function SignInCtrl($auth,$state,MessageService){function signIn(params){$auth.submitLogin(params).then(function(){MessageService.setMessage("Logged in successfully."),$state.go("institutions")})["catch"](function(response){return MessageService.setErrorMessage("Invalid login"),response.data&&response.data.errors&&MessageService.setErrorMessage(response.data.errors[0]),!0})}var vm=this;vm.signIn=signIn}angular.module("everycent.security").controller("SignInCtrl",SignInCtrl),SignInCtrl.$inject=["$auth","$state","MessageService"]}();
//# sourceMappingURL=everycent-app-0.0.1.min.map