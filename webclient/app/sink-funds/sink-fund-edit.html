<div class="row">
    <div class="col-xs-12">
        <h3>Edit Sink Fund: {{ vm.sinkFund.name }}</h3>
    </div>
</div>

<ec-panel title="Edit Sub Accounts for: {{ vm.sinkFund.name }}" type="primary">
    <table class="table table-bordered rounded fixed-layout">
    <thead>
        <tr class="heading">
            <th style="width:25%;">Name</th>
            <th style="width:15%;" class="text-right">Amount</th>
            <th style="width:25%;" class="hidden-xs">Comment</th>
            <th style="width:5%;"></th>
        </tr>
    </thead>
    <tfoot>
        <tr class="total">
            <th> Total </th>
            <th class="text-right">
                {{ vm.util.total(vm.sinkFund.subAccounts, 'amount') | ecToDollars }}
            </th>
            <th class="text-right">
                Unassigned: &nbsp; &nbsp; <ec-amount-formatted amount="vm.unassignedBalance()"></ec-amount-formatted>
            </th>
            <th></th>
        </tr>
    </tfoot>
    <tbody>
        <tr ng-repeat="subAccount in vm.sinkFund.subAccounts">
            <td>
              <span> {{ subAccount.name }} </span>
            </td>
            <td class="text-right">
              <span> {{ subAccount.amount }} </span>
            </td>
            <td>
                <span> {{ subAccount.comment }} </span>
            </td>
            <td></td>
        </tr>
        <tr class="category-action">
            <td colspan="6" ng-show="vm.isEditMode">
                <button class="btn btn-primary" ng-click="vm.addNewSubAccount()">
                    Add Sub Account
                </button>
            </td>
        </tr>
    </tbody>
    </table>


    <div class="row">
        <div class="col-xs-10">
            <div class="pull-right" ng-show="vm.isEditMode">
                <button class="btn btn-success"
                        ng-click="vm.saveChanges()">
                    Save Changes
                </button>
                &nbsp;
                &nbsp;
                <button class="btn btn-danger"
                        ng-click="vm.cancelEdit()">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</ec-panel>
